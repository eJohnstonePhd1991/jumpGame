const bootState={preload:function(){game.load.image('progressBar','assets/progressBar.png')},create:function(){game.device.desktop||(game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,game.scale.setMinMax(game.width/2,game.height/2,2*game.width,2*game.height),game.scale.pageAlignHorizontally=!0,game.scale.pageAlignVertically=!0,document.body.style.backgroundColor='#3498db'),game.state.start('load')}};const loadState={preload:function(){console.log('load');const a=game.add.text(game.width/2,150,'loading...',{font:'30px Arial',fill:'#ffffff'});a.anchor.setTo(0.5,0.5);const b=game.add.sprite(game.width/2,200,'progressBar');b.anchor.setTo(0.5,0.5),game.load.setPreloadSprite(b),game.load.image('sky','assets/layer-1-sky.png'),game.load.image('mid','assets/layer-2.png'),game.load.spritesheet('player','assets/player2.png',20,20),game.load.image('floor','assets/wallHorizontal.png'),game.load.image('enemy','assets/enemy.png'),game.load.image('pixel','assets/pixel.png'),game.load.audio('jump',['assets/jump.ogg','assets/jump.mp3']),game.load.audio('coin',['assets/coin.ogg','assets/coin.mp3']),game.load.audio('dead',['assets/dead.ogg','assets/dead.mp3']),game.add.plugin(PhaserInput.Plugin)},create:function(){game.state.start('menu')}};const menuState={create:function(){this.sky=game.add.tileSprite(0,0,game.width,game.height,'sky'),this.sky.tileScale.x=0.5,this.sky.tileScale.y=0.5;const a=game.add.text(game.width/2,80,'Jump!',{font:'50px Arial',fill:'#ffffff',boundsAlignH:'center'});a.anchor.setTo(0.5,0.5),a.setShadow(3,3,'rgba(0,0,0,0.5)',2);let b=game.device.desktop?'Press the up key to jump. \n Hold it to jump higher!':'Touch the screen to jump. \n Hold it to jump higher!';const c=game.add.text(game.width/2,200,b,{font:'30px Arial',fill:'#ffffff',boundsAlignH:'center'});c.anchor.setTo(0.5,0.5),c.setShadow(3,3,'rgba(0,0,0,0.5)',2);const d=game.input.keyboard.addKey(Phaser.Keyboard.UP);d.onDown.add(this.start,this),game.device.desktop||game.input.onDown.add(this.start,this)},start:function(){game.state.start('play')},update:function(){this.sky.tilePosition.x-=1}};const playState={create:function(){game.time.advancedTiming=!0,this.gameSpeed=1,this.sky=game.add.tileSprite(0,0,game.width,game.height,'sky'),this.sky.tileScale.x=0.33,this.sky.tileScale.y=0.33,this.mid=game.add.tileSprite(0,0,game.width,game.height-100,'mid'),this.mid.tileScale.x=0.33,this.mid.tileScale.y=0.33,this.player=game.add.sprite(game.width/4,game.height/2,'player'),this.player.anchor.setTo(0.5,0.5),this.player.scale.setTo(2),this.player.animations.add('right',[1,2],8,!0),this.player.animations.play('right',10*this.gameSpeed,'true'),game.stage.backgroundColor='#3498db',this.jumpSound=game.add.audio('jump'),this.coinSound=game.add.audio('coin'),this.deadSound=game.add.audio('dead'),game.physics.arcade.enable(this.player),this.player.body.gravity.y=1200,this.player.jumpTimer=0,this.cursor=game.input.keyboard.createCursorKeys(),this.floor=game.add.tileSprite(0,500,game.width,100,'floor'),game.physics.arcade.enable(this.floor),this.floor.body.immovable=!0,this.enemies=game.add.group(),this.enemies.enableBody=!0,this.enemies.createMultiple(10,'enemy'),this.scoreLabel=game.add.text(30,30,'score: 0',{font:'18px Arial',fill:'#ffffff'}),this.score=0,this.addEnemy(),this.nextEnemy=0,this.emitter=game.add.emitter(0,0,15),this.emitter.makeParticles('pixel'),this.emitter.setYSpeed(-150,150),this.emitter.setXSpeed(-150,150),this.emitter.setScale(2,0,2,0,800),this.emitter.gravity=0},movePlayer:function(){this.cursor.up.isDown||game.input.pointer1.isDown?this.player.body.touching.down&&0==this.player.jumpTimer?(this.jumpSound.play(),this.player.jumpTimer=1,this.player.body.velocity.y=-200):0<this.player.jumpTimer&&20>this.player.jumpTimer&&(this.player.jumpTimer++,this.player.body.velocity.y=-200-10*this.player.jumpTimer):this.player.jumpTimer=0},playerDie:function(){this.player.kill(),this.deadSound.play(),this.emitter.x=this.player.x,this.emitter.y=this.player.y,game.camera.shake(0.02,300),this.emitter.start(!0,800,null,15),this.scoreLabel.visible=!1;let a='You died! Your total score was: '+this.score;this.username=game.add.inputField(game.width/2,300,{font:'18px Arial',fill:'#212121',fontWeight:'bold',width:150,padding:8,borderWidth:1,borderColor:'#000',borderRadius:6,placeHolder:'AAA',type:PhaserInput.InputType.text}),this.submit=game.add.button(game.width/2+300,300,'enemy',this.submitName,this),a+=game.device.desktop?'\n Press up to restart':'\n Touch the screen to restart';const b=game.add.text(game.width/2,200,a,{font:'30px Arial',fill:'#ffffff',boundsAlignH:'center'});b.anchor.setTo(0.5,0.5),this.cursor.up.onDown.add(this.startMenu,this),game.device.desktop||game.input.onDown.add(this.startMenu,this)},submitName:function(){var a='Your username is '+(this.username.value?this.username.value:'John');console.log(a),this.username.destroy(),this.submit.destroy();game.add.text(game.width/2,400,a,{font:'30px Arial',fill:'#ffffff',boundsAlignH:'center'})},startMenu:function(){game.state.start('play')},addEnemy:function(){const a=this.enemies.getFirstDead();a&&(a.scale.setTo(1,game.rnd.integerInRange(1,3)),a.anchor.setTo(0.5,1),a.reset(game.width,500),a.body.gravity.y=500,a.body.velocity.x=-50-50*this.gameSpeed,a.checkWorldBounds=!0,a.outOfBoundsKill=!0,a.passed=!1,a.hasSpawned=!1)},updateScore:function(){console.log('score'),this.score++,this.coinSound.play(),this.scoreLabel.text=`score: ${this.score}`,0==this.score%5&&(this.gameSpeed++,this.enemies.forEachAlive(function(a){a.body.velocity.x=-50-50*this.gameSpeed},this))},update:function(){game.physics.arcade.collide(this.player,this.floor),game.physics.arcade.collide(this.enemies,this.floor),game.physics.arcade.overlap(this.player,this.enemies,this.playerDie,null,this),this.movePlayer(),game.debug.text(game.time.fps,2,14,'#00ff00'),!0==this.player.alive&&this.enemies.forEach(function(a){a.x<game.width/2&&!1==a.hasSpawned&&(a.hasSpawned=!0,this.addEnemy()),a.x<this.player.x&&!1==a.passed&&(a.passed=!0,this.updateScore())},this);this.sky.tilePosition.x-=this.gameSpeed,this.mid.tilePosition.x-=2*this.gameSpeed}};const game=new Phaser.Game(800,600);game.state.add('boot',bootState),game.state.add('load',loadState),game.state.add('menu',menuState),game.state.add('play',playState),game.state.start('boot');